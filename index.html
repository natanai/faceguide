<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FaceGuide — Overlay Alignment</title>
<style>
:root { --fg:#111; --muted:#666; --bg:#fff; --line:#ddd; --accent:#005bd1; --pill:#eef4ff; }
* { box-sizing: border-box; }
body { margin: 16px; color: var(--fg); background: var(--bg); font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; }
header { margin-bottom: 12px; }
h1 { font-size: 1.25rem; margin: 0 0 6px; }
h2 { font-size: 1rem; margin: 0 0 6px; }
a { color: var(--accent); text-decoration: none; }
a:hover { text-decoration: underline; }
.panel { border: 1px solid var(--line); border-radius: 10px; padding: 16px; max-width: 960px; margin: 0 auto; background: #fff; }
.hero { display: flex; flex-wrap: wrap; gap: 16px; margin: 16px 0 24px; }
.hero-card { flex: 1 1 280px; border: 1px solid var(--line); border-radius: 12px; padding: 16px; background: #f7f9ff; }
.hero-card p { margin: 0 0 12px; font-size: 14px; line-height: 1.45; }
.cta-btn { display: inline-flex; align-items: center; gap: 6px; padding: 8px 14px; border-radius: 999px; background: var(--accent); color: #fff; font-weight: 600; text-decoration: none; }
.cta-btn:hover { text-decoration: none; background: #0046a5; }
.hero-card .muted { color: var(--muted); margin: 0; }
.controls { display: flex; flex-wrap: wrap; gap: 12px; align-items: center; margin-bottom: 12px; }
.controls label { font-size: 14px; display: flex; align-items: center; gap: 6px; }
.controls input[type="range"] { width: 140px; }
.controls .control-value { min-width: 44px; text-align: right; font-variant-numeric: tabular-nums; }
.controls-manual { margin-top: -4px; }
.controls-manual label { min-width: 200px; }
.controls button { padding: 6px 12px; border-radius: 6px; border: 1px solid var(--accent); background: var(--pill); color: var(--accent); cursor: pointer; }
.controls button:disabled { opacity: 0.5; cursor: not-allowed; }
.small { font-size: 12px; }
.muted { color: var(--muted); }
.wrap { position: relative; width: 100%; border: 1px solid var(--line); border-radius: 8px; overflow: hidden; background: #f8f8f8; }
canvas { display: block; width: 100%; height: auto; }
.status-ok { color: #1a7f3b; }
.status-warn { color: #b36b00; }
.dot-label { position: absolute; font-size: 12px; padding: 2px 6px; background: rgba(0,0,0,0.6); color: #fff; border-radius: 6px; transform: translate(-50%, -50%); pointer-events: none; }
</style>
</head>
<body>
<header>
  <h1>FaceGuide — Overlay Alignment</h1>
  <p class="muted">Align your saved target portrait over the comparison feed using the landmarks you placed.</p>
  <div class="hero">
    <div class="hero-card">
      <h2>1. Load your faces</h2>
      <p>Upload the target portrait, capture or upload the comparison face, and drop matching landmarks in the Manual Landmark Setup. Everything is saved automatically for this overlay view.</p>
      <a class="cta-btn" href="manual.html">Open Manual Landmark Setup →</a>
      <p class="muted small">Use this whenever you need to change the images or adjust pins.</p>
    </div>
    <div class="hero-card">
      <h2>2. Align the overlay</h2>
      <p>Return here once both faces have at least three matching points. Adjust opacity, offsets, scale, or rotation to fine-tune asymmetrical features.</p>
      <p class="muted small">Saved uploads and landmarks appear here immediately.</p>
    </div>
  </div>
</header>
<main class="panel">
  <div class="controls">
    <label>Overlay opacity
      <input type="range" id="opacity" min="0" max="100" value="50" />
      <span id="opacityVal">50%</span>
    </label>
    <label><input type="checkbox" id="showPoints" checked /> Show control points</label>
    <button id="startCapture">Start live capture</button>
    <button id="stopCapture" disabled>Stop</button>
    <button id="freezeCapture" disabled>Freeze frame</button>
  </div>
  <div class="controls controls-manual">
    <label>Horizontal offset
      <input type="range" id="offsetX" min="-250" max="250" value="0" />
      <span id="offsetXVal" class="control-value">0px</span>
    </label>
    <label>Vertical offset
      <input type="range" id="offsetY" min="-250" max="250" value="0" />
      <span id="offsetYVal" class="control-value">0px</span>
    </label>
    <label>Scale
      <input type="range" id="scale" min="80" max="120" value="100" />
      <span id="scaleVal" class="control-value">100%</span>
    </label>
    <label>Rotation
      <input type="range" id="rotation" min="-20" max="20" value="0" />
      <span id="rotationVal" class="control-value">0°</span>
    </label>
    <button id="resetAdjust">Reset adjustments</button>
  </div>
  <div id="status" class="muted small"></div>
  <div class="wrap" id="canvasWrap">
    <canvas id="overlayCanvas"></canvas>
  </div>
</main>
<video id="captureVideo" autoplay muted playsinline style="display:none;"></video>
<script type="module" src="./scripts/overlay.js"></script>
</body>
</html>
